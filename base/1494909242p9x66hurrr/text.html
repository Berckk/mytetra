<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'Consolas'; font-size:12pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffe289;"><a name="navchain-border"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">Р</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">азработка конфигураций в режиме без использования модальности</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#1"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Зачем надо отказываться от модальности</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#2"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Когда надо отказываться от модальности</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#3"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Сравнение модального и немодального режимов работы</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#4"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Механизмы платформы для отказа от модальности</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#14"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Как писать новые конфигурации</span></a></li>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#15"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Общие замечания</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#16"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Типичные примеры</span></a></li></ul>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 3;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#17"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Вопрос в модуле команды, формы или в общем модуле</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#18"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Вопрос в модуле управляемого приложения</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#19"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Как открыть произвольную форму в блокирующем режиме</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#20"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Как поступить, если форму нужно открывать то в обычном, то в блокирующем режиме</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#21"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Как передать дополнительную информацию в форму, открываемую в блокирующем режиме</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#22"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Вопрос во вложенной процедуре, после которой нет кода</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#23"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Вопрос во вложенной процедуре, после которой есть код</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#24"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Вопрос в обработчике формы ПередЗакрытием</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#25"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Вопрос в обработчике формы ПередЗаписью</span></a></li></ul>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#26"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Как переделывать старые конфигурации</span></a></li></ul>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#27"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Общие замечания</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#28"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Поиск модальных методов</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#33"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Автоматическое преобразование модальных методов</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#34"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Ручное преобразование конструкций, которые невозможно преобразовать автоматически</span></a></li></ul>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 3;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#35"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Необходимо преобразование в асинхронную процедуру</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#36"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Присвоение cсылочного параметра: СтандартнаяОбработка</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#37"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Присвоение cсылочного параметра: Отказ</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#38"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Невозможно выделить фрагмент-окончание: фрагмент содержит незавершенный блок условия... Пример 1</span></a></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#39"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Невозможно выделить фрагмент-окончание: фрагмент содержит незавершенный блок условия... Пример 2</span></a></li></ul>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="1"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">З</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">ачем надо отказываться от модальности</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">1С:Предприятие использует модальные окна в тех ситуациях, когда от пользователя требуется ввод информации, без которой невозможно дальнейшее выполнение алгоритма. При этом полностью блокируется весь остальной интерфейс программы, а исполнение программного кода останавливается до тех пор, пока пользователь не закроет модальное окно. С появлением веб-клиента и с переходом 1С:Предприятия на мобильные платформы, модальные окна оказались источником большого количества неудобств и проблем, зачастую неразрешимых.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Как правило &quot;десктопные&quot; браузеры лучше или хуже, но поддерживают модальные окна и открывают их в новом окне браузера как &quot;всплывающее окно&quot;. Но из-за того, что технология всплывающих окон массово используется в Интернете для размещения рекламы, практически во всех браузерах стандартно отключен показ всплывающих окон. В подавляющем большинстве случаев без изменения этой настройки браузера работа веб-клиента становится невозможной.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Другая проблема заключается в том, что мобильные браузеры вообще не поддерживают модальные окна.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В такой ситуации вариант работы интерфейса 1С:Предприятия без использования модальных окон снимает все перечисленные выше проблемы. При этом не происходит отказа от функциональности, которая обеспечивалась ранее модальными окнами. Но эта функциональность реализуется другими технологиями, которые не препятствуют работе 1С:Предприятия в браузерах. В новом режиме работы интерфейса окно, которое раньше было бы модальным, рисуется в пределах родительского окна, и точно так же блокирует весь остальной интерфейс веб-клиента. В результате:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">Не происходит открытия новых окон браузера, что повышает производительность и стабильность веб-клиента;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">Во многих случаях дополнительная настройка браузера становится ненужной, так как 1С:Предприятие больше не использует всплывающие окна;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">Любая конфигурация, используя веб-клиент, может работать на iPad.</span></li></ul>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="2"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">К</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">огда надо отказываться от модальности</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Не нужно «бросать всё» и начинать отказываться от модальности. Есть несколько случаев, когда можно продолжать работать в модальном режиме.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Во-первых, не любая версия технологической платформы поддерживает режим работы интерфейса без использования модальности. Этот режим работы существует, начиная с версии 8.3.3.721 (06.09.2013). Поэтому, если вы работаете на младших версиях платформы, можете пока не озадачиваться отказом от модальности.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Во-вторых, не все прикладные решения в обязательном порядке должны использовать этот режим. Критичными являются приложения, работа с которыми будет вестись:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">На iPad;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">В режиме сервиса (например, они будут размещаться на 1cfresh.com);</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">С помощью веб-клиента.</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Если ваше прикладное решение заведомо не будет использоваться в этих режимах, вы можете пока не отказываться от модальности.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Однако все типовые решения 1С разрабатывает исходя из того, что они могут использоваться любым из доступных способов. Поэтому в них основным режимом работы интерфейса является режим без использования модальности. В этом режиме будут работать новые прикладные решения. На этот режим будут переводиться старые прикладные решения. А значит, этот режим работы вам лучше начать осваивать уже сейчас. Даже если ваше приложение пока может его не использовать, мы рекомендуем, по возможности, начать перевод уже сейчас. Потому что в будущем этот режим работы будет единственным.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="3"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">С</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">равнение модального и немодального режимов работы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Следует сказать, что отказ от модальности - это вещь не простая. Она является существенным поворотом в сторону асинхронной модели работы клиентского приложения. Не все сценарии, использующие на данный момент модальные окна, могут быть легко переведены на использование блокирующих окон.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Существенное количество сценариев работы может потребовать не просто замены одних методов встроенного языка другими, а изменения самого подхода к проектированию юзабилити интерфейса прикладного решения. Проще говоря, прежде чем пытаться переделать модальный диалог, стоит подумать, а можно ли здесь вообще обойтись без него?</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Подробнее об этом мы поговорим позже, а для начала разберемся, в чём же заключаются принципиальные отличия этих двух режимов работы интерфейса. Понять разницу модального и немодального режимов работы проще всего на небольшом примере. Старая процедура, открывавшая модальное окно и обрабатывавшая полученные им данные, могла выглядеть так:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image22686.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Метод Вопрос() открывает модальное окно. В момент исполнения этого метода дальнейшее исполнение программного кода останавливается, модальное окно блокирует весь интерфейс и ожидает реакции пользователя.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">После того, как пользователь нажимает одну из кнопок, например &quot;Да&quot;, исполнение кода продолжается, а модальное окно исчезает и пользователю снова становится доступен весь интерфейс:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image9383.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В этом примере выводятся два тестовых сообщения и на картинке видно, что оба сообщения появляются на экране только после того, как модальное окно исчезнет.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Таким образом можно сказать, что старый режим работы обеспечивает модальность как для разработчика (останавливается исполнение кода), так и для пользователя (блокируется интерфейс, доступно только модальное окно).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Новый режим работы интерфейса обеспечивает модальность лишь для пользователя. Для разработчика, в момент отображения блокирующего окна, исполнение программного кода не останавливается. Чтобы увидеть это рассмотрим не совсем корректный пример:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image22938.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Метод ПоказатьВопрос() открывает блокирующее окно. В момент исполнения этого метода блокирующее окно заблокирует интерфейс, и он будет ожидать реакции пользователя. Однако исполнение программного кода на этом не остановится, и будут выполнены все операторы, следующие за методом ПоказатьВопрос(). В данном случае будет выведено сообщение.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">После того, как пользователь нажмёт одну из кнопок, например &quot;Да&quot;, начнётся исполнение другой процедуры. Той, которая была назначена в качестве обработчика оповещения при вызове метода ПоказатьВопрос():</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image18825.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В этом примере мы специально допустили ошибку. Но благодаря ей мы можем увидеть обе важные особенности.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Во-первых, алгоритм, который раньше являлся одним целым, теперь нужно разделять на две части. Одна часть открывает блокирующее окно. Вторая часть обрабатывает реакцию пользователя в блокирующем окне. Чтобы система знала, с какого места продолжать исполнение программного кода, блокирующему окну передаётся имя процедуры, которая должна быть выполнена тогда, когда пользователь закроет это окно.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Во-вторых, после оператора, открывающего блокирующее окно, не должно содержаться исполняемого кода. Иначе этот код будет выполнен, не дожидаясь реакции пользователя.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому правильным решением является перенос всего кода в процедуру, исполняемую после закрытия блокирующего окна:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image32663.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Дополнительно об этом можно почитать в документации </span><a href="http://its.1c.ru/db/v83doc#bookmark:dev:TI000000435"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Руководство разработчика, раздел 7.8. Различные подходы к модальности</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Тут нужно оговориться, и мы это видели на примере, что нет запрета на то, чтобы после оператора, открывающего блокирующее окно, содержался какой-либо исполняемый код. Но вы должны понимать, что платформа выполнит этот код без остановки. Независимо от того, что введёт пользователь в блокирующем окне, или когда он это окно закроет. Если такое поведение не противоречит логике вашего прикладного решения, то пожалуйста, можно использовать этот вариант.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="4"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">М</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">еханизмы платформы для отказа от модальности</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Этот раздел носит, скорее, «энциклопедический» характер. Он будет полезен тем, кто хочет в полной мере познакомиться со всеми механизмами платформы, которые появились для обеспечения немодального режима работы.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Если же вам не терпится приступить к «активным действиям», то вы можете перейти сразу к одному из следующих разделов:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#14"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Как писать новые конфигурации</span></a><span style=" font-size:small;"> - для тех, кто сразу хочет создавать конфигурацию, работающую в режиме без использования модальности;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#26"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Как переделывать старые конфигурации</span></a><span style=" font-size:small;"> - для тех, кто хочет перевести имеющуюся конфигурацию в режим работы без использования модальности.</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Итак, возвращаясь к механизмам платформы нужно сказать, что по большому счёту они делятся на две большие группы. Механизмы, которые обеспечивают работу в немодальном режиме и механизмы, помогающие перейти в этот режим. Основная часть этих механизмов появилась в платформе начиная с версии 8.3.3.721 (06.09.2013), а в версии 8.3.5 в неё были добавлены инструменты рефакторинга, облегчающие преобразование имеющихся конфигураций. Перечислим все эти механизмы по-порядку.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="5"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Н</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">овый режим интерфейса</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">У конфигурации появилось новое свойство - &quot;Режим использования модальности&quot;. Именно оно и определяет, в каком режиме работает конфигурация:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">&quot;Не использовать&quot; - это новый, немодальный режим работы. Для новых конфигураций это стандартный режим;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">&quot;Использовать с предупреждением&quot; - этот режим предназначен для разработчика. Он не препятствует использованию модальных окон, но каждый раз, когда открывается модальное окно, выдаёт предупреждающее сообщение. Пример использования этого режима есть в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#29"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Поиск модальных методов - В режиме 1С:Предприятие</span></a><span style=" font-size:small;">;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">&quot;Использовать&quot; - режим, обеспечивающий совместимость новой версии платформы со старыми конфигурациями, работающими в модальном режиме.</span></li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="6"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Н</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">овый режим открытия окна формы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">У свойства формы РежимОткрытияОкна появилось новое значение - БлокироватьВесьИнтерфейс. Именно это значение теперь следует использовать для того, чтобы из всего интерфейса пользователю была бы доступна только одна открытая форма. Пример использования этого свойства есть в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#19"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Как открыть произвольную форму в блокирующем режиме</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="7"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Н</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">емодальные аналоги модальных методов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Некоторые методы встроенного языка открывают модальные окна. Для этих методов в платформе были созданы «методы-дублёры», которые обладают той же функциональностью, но используют блокирующие окна. Например, старый метод Вопрос() и новый «метод-дублёр» ПоказатьВопрос(). Полный список этих методов можно посмотреть в документации </span><a href="http://its.1c.ru/db/v83doc#bookmark:dev:TI000000438"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Руководство разработчика, Приложение 13. Соответствие синхронных методов асинхронным аналогам</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Кроме документации метод-дублёр можно посмотреть и в синтакс-помощнике. Для каждого старого метода они указаны.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Пример использования этих методов есть, например, в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#17"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Вопрос в модуле команды, формы или в общем модуле</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="8"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Н</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">овый синтаксис метода ОткрытьФорму()</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Для того чтобы открывать форму в блокирующем режиме, метод-дублёр создавать не стали. Потому что уже и так существовало два метода: ОткрытьФормуМодально() и ОткрытьФорму(). Поэтому в привычный метод ОткрытьФорму() добавили несколько новых параметров: ОписаниеОповещенияОЗакрытии и РежимОткрытияОкна.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Они позволяют сразу передать форме нужное описание оповещения и указать новый режим открытия окна. Пример можно посмотреть в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#20"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Как поступить, если форму нужно открывать то в обычном, то в блокирующем режиме</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="9"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">О</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">бъект встроенного языка ОписаниеОповещения</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Назначение этого объекта - указать точку конфигурации, с которой должно быть продолжено исполнение кода после того, как пользователь закроет блокирующее окно. Этот объект содержит имя экспортируемой процедуры, которая начнёт выполняться, а также указание на модуль, в котором находится эта процедура.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Если процедура находится в том же модуле, в котором создаётся описание оповещения, то для указания на этот модуль используется значение ЭтотОбъект. Это новое свойство, реализованное для управляемой формы, команды командного интерфейса и общего модуля. Именно в этих модулях может находиться процедура обработки оповещения. Пример есть в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#17"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Вопрос в модуле команды, формы или в общем модуле</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Иногда возникает необходимость разместить обработчик оповещения не в том модуле, в котором создаётся описание оповещения, а в другом, например, в общем модуле. В таком случае вместо ЭтотОбъект можно указать имя общего модуля. Пример можно посмотреть в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#18"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Вопрос в модуле управляемого приложения</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Кроме этих параметров описание оповещения может содержать структуру с произвольными данными. Передача этих данных в обработчик оповещения может понадобиться для того, чтобы алгоритм, выполняемый после реакции пользователя, мог использовать значения, вычисленные перед открытием блокирующего окна. Такой пример можно посмотреть в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#21"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Как передать дополнительную информацию в форму, открываемую в блокирующем режиме</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="10"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">С</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">войство формы ОписаниеОповещенияОЗакрытии</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">У формы появилось новое свойство - ОписаниеОповещенияОЗакрытии. В него передаётся то описание оповещения, которое мы указываем в методе ОткрытьФорму(). После закрытия формы исполнение кода продолжается с процедуры, указанной в этом описании оповещения.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="11"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">М</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">етод ВыполнитьОбработкуОповещения()</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Этот метод используется для того, чтобы выполнить процедуру обработчика оповещения. Чтобы указать на этот обработчик, в метод передаётся описание оповещения.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Этот метод требуется в сложных «многоуровневых» алгоритмах асинхронных вызовов, т.к. описание оповещения может быть сконструировано в начале алгоритма, а реальное использование этого обработчика может понадобиться через несколько вложенных процедур. Такой пример можно посмотреть в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#23"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Вопрос во вложенной процедуре, после которой есть код</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="12"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">П</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">оиск модальных методов в режиме расширенной проверки конфигурации</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В механизме проверки конфигурации реализован новый режим расширенной проверки &quot;Поиск использования модальности&quot;. Он позволяет найти те фрагменты кода, которые приводят к открытию модальных окон. Пример можно посмотреть в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#30"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Проверка конфигурации в режиме Конфигуратор</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Из командной строки эта проверка выполняется с помощью параметра -CheckUseModality ключа командной строки запуска ExtendedModulesCheck.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="13"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">И</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">нструменты для полуавтоматического перевода конфигураций в режим без использования модальности</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Эти инструменты реализованы в платформе начиная с версии 8.3.5. Они собраны в меню &quot;Конфигурация - Рефакторинг&quot; и &quot; Текст - Рефакторинг - Модальные вызовы&quot;. С помощью этих инструментов можно частично автоматически, а частично с применением «ручного труда» перевести существующую конфигурацию в немодальный режим работы. Примеры использования этих инструментов можно посмотреть в разделах </span><a href="https://its.1c.ru/docs/v8nonmodal/#33"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Автоматическое преобразование модальных методов</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;"> и </span><a href="https://its.1c.ru/docs/v8nonmodal/#34"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Ручное преобразование конструкций, которые невозможно преобразовать автоматически</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="14"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">К</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">ак писать новые конфигурации</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="15"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">О</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">бщие замечания</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Если вы создаёте новую конфигурацию и хотите, чтобы она не использовала модальный режим, нужно придерживаться нескольких простых советов.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Во-первых, о свойствах самой конфигурации беспокоиться не надо. Режим без использования модальности является стандартным для новых конфигураций. Поэтому после создания новой информационной базы с пустой конфигурацией её свойство &quot;Режим использования модальности&quot; будет установлено в значение &quot;Не использовать&quot;.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Во-вторых, прежде чем использовать блокирующие окна, или методы, открывающие диалоги в блокирующем режиме, следует подумать, есть ли в них необходимость. Если логика работы позволяет обойтись без блокирующего диалога - лучше не использовать его. Более того, в целом ряде случаев ради этого полезно изменить алгоритм или какие-то интерфейсные решения. Потому что это может быть проще, понятнее и надёжнее, чем пытаться реализовать «именно такой» сценарий работы в асинхронной модели работы интерфейса.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Как мы уже говорили ранее, не все сценарии работы могут быть легко и просто переведены на использование блокирующих диалогов. Если нельзя отказаться от использования блокирующих диалогов, то в новых конфигурациях имеет смысл заранее продумывать разделение кода, требующего действий пользователя, и кода, реализующего прикладную логику. И стараться их не смешивать. Например, сначала выполнить все интерактивные действия, «пообщаться» с пользователем, а после этого выполнить прикладной алгоритм «без вопросов».</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В-третьих, если вы всё же решили использовать блокирующие диалоги, то вместо старых, модальных методов, следует использовать их новые немодальные аналоги. Обычно (но не всегда) немодальные аналоги начинаются со слова «Показать». В синтакс-помощнике для каждого старого модального метода указан его блокирующий аналог. А полный список соответствия всех методов можно посмотреть </span><a href="http://its.1c.ru/db/v83doc#bookmark:dev:TI000000438"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">в документации</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В-четвёртых, чтобы открыть форму в блокирующем режиме вместо метода ОткрытьФормуМодально() нужно использовать метод ОткрытьФорму(), но с новым синтаксисом. Новый синтаксис позволяет указать ОписаниеОповещения и режим открытия окна.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В-пятых, если форма всегда будет открываться только в блокирующем режиме, в конфигураторе нужно установить её свойство РежимОткрытияОкна в значение &quot;Блокировать весь интерфейс&quot;.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Здесь надо сделать следующее замечание. Используя &quot;Блокировать весь интерфейс&quot; мы полностью моделируем для пользователя старое, модальное поведение. Но дело в том, что модальные окна, являясь элементами синхронной (блокирующей) модели, не очень хорошо сочетаются с природой веб-приложений, которые в большинстве своём построены на асинхронной модели. То есть веб-приложения не блокируют действия пользователя, если на это нет совсем крайней необходимости.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому если мы хотим, а мы хотим, двигаться в сторону веб-приложений, то вместо &quot;Блокировать весь интерфейс&quot; лучше использовать &quot;Блокировать окно владельца&quot;. Тогда окно владельца будет заблокировано, но остальной интерфейс прикладного решения для пользователя будет доступен.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В некоторых сценариях это может быть полезно. Например для того, чтобы выполнить действия, препятствующие дальнейшей работе длительной обработки. Через 30 минут её работы выяснилось, что не все нужные документы проведены. Тогда пользователь может провести документы, а потом вернуться к прерванной обработке. Не запуская её с самого начала.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В некоторых ситуациях это может быть вредно. Потому что пользователь может &quot;потерять фокус&quot;, начать &quot;гулять&quot; по интерфейсу, зайти далеко и потом долго искать ту форму, на которой был задан вопрос.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Однозначно хорошего совета тут дать нельзя. Но все же, прежде чем использовать &quot;Блокировать весь интерфейс&quot; в каждом конкретном случае желательно проанализировать возможность использования значения &quot;Блокировать окно владельца&quot;. Потому что оно больше подходит к формату веб-приложений.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В-шестых, так как указывать ОписаниеОповещения нужно во всех методах, использующих блокирующие окна, в конфигураторе есть возможность автоматизировать эту работу (начиная с версии 8.3.5). Достаточно написать имя метода и открывающую скобку. А после этого из контекстного меню вызвать команду &quot;Рефакторинг - Создать обработку оповещения&quot;:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image30026.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В результате платформа создаст конструктор и процедуру, обрабатывающую оповещение:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image4170.png" /></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="16"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Т</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">ипичные примеры</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Далее мы разберём несколько типичных примеров использования немодальных вызовов. Эти примеры помогут вам разобраться в новых подходах к написанию кода и построению алгоритмов.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="17"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">В</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">опрос в модуле команды, формы или в общем модуле</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Суть этого примера заключается в том, что мы используем немодальный метод-дублёр, в который передаём описание оповещения. А всю логику, которая должна обрабатывать ответ пользователя, помещаем в отдельную экспортируемую процедуру в этом же модуле. Именно на эту процедуру и указывает описание оповещения.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image16369.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="18"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">В</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">опрос в модуле управляемого приложения</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Особенность этого примера заключается в том, что нет возможности сослаться на модуль приложения с помощью свойства ЭтотОбъект. Поэтому процедуру, обрабатывающую оповещение, нужно располагать, например, в неглобальном клиентском общем модуле. В конструкторе описания оповещения на такой модуль можно сослаться, просто указав его имя:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image4153.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Этот же приём нужно использовать, если вы находитесь в глобальном общем модуле.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">По поводу модуля управляемого приложения нужно сделать ещё одно замечание. Возможно, вы захотите организовать немодальный диалог с пользователем в обработчике ПередНачаломРаботыСистемы. Так, чтобы до момента ответа пользователя не открывалось главное окно приложения. К сожалению, на момент написания статьи, такой возможности нет. И в этом случае вам придётся выбрать другую логику работы прикладного решения.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Другой сценарий, который является крайне нежелательным - это немодальный диалог в обработчике ПередЗавершениемРаботыСистемы. Во-первых потому, что в условиях веб-клиента браузеры очень негативно относятся к показу каких-либо сообщений при закрытии приложений и блокируют их. Во-вторых потому, что наличие такого диалога не позволит реализовать некоторые сценарии работы.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Например, в конфигурации есть форма, перед закрытием которой также задаётся вопрос пользователю в немодальном диалоге. Допустим, пользователь модифицировал данные в этой форме и, не сохраняя их, пытается закрыть всё приложение. В результате он ответит что-то в диалоге перед закрытием формы, форма закроется, но приложение останется открытым. Так происходит потому, что в немодальном диалоге перед закрытием формы сначала отменяется стандартная последовательность действий системы (</span><a href="https://its.1c.ru/docs/v8nonmodal/#24"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">см. пример</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">). А это, в том числе, отменяет и закрытие самого приложения.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="19"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">К</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">ак открыть произвольную форму в блокирующем режиме</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Если у вас есть форма, которую вы всегда хотите открывать только в блокирующем режиме, можно сразу, в конфигураторе, установить её свойство РежимОткрытияОкна в значение &quot;Блокировать весь интерфейс&quot;. А затем открывать её прежним методом ОткрытьФорму(), передавая в него описание оповещения:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image7706.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="20"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">К</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">ак поступить, если форму нужно открывать то в обычном, то в блокирующем режиме</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В этом случае в конфигураторе свойство формы РежимОткрытияОкна лучше оставить в стандартном значении &quot;Независимый&quot;. А при открытии формы в явном виде указывать нужный режим открытия окна прямо в методе ОткрытьФорму():</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image25335.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="21"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">К</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">ак передать дополнительную информацию в форму, открываемую в блокирующем режиме</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Может так случиться, что до вызова блокирующего окна у вас накопились какие-то значения, которые должны быть использованы после того, как пользователь ответит на вопрос или закроет блокирующую форму. Как передать их в процедуру, обрабатывающую оповещение?</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Для этого у объекта ОписаниеОповещения существует третий параметр в конструкторе, в который можно передать структуру, содержащую значения, необходимые в дальнейшем:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image18642.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="22"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">В</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">опрос во вложенной процедуре, после которой нет кода</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Рассмотрим ситуацию, когда блокирующий вызов хочется написать во вложенной процедуре. Например, так:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image14874.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В этом случае достаточно будет вместо одной вложенной процедуры написать две процедуры, использующие блокирующий метод ПоказатьВопрос():</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image32041.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="23"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">В</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">опрос во вложенной процедуре, после которой есть код</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Рассмотрим более сложный случай, когда после вызова вложенной функции выполнятся некоторый код. Например, так:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image12542.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Казалось бы, следуя рекомендациям, надо просто заменить вложенную процедуру двумя процедурами:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image6505.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Однако в этом случае алгоритм, следующий за вызовом вложенной процедуры, будет выполнен ещё до того, как пользователь ответит на вопрос. Ведь, как мы знаем, исполнение кода не останавливается после выполнения блокирующего метода (</span><a href="https://its.1c.ru/docs/v8nonmodal/#3"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Сравнение модального и немодального режимов работы</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">):</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image9113.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому в такой ситуации нужно не только использовать блокирующий метод с вызовом оповещения, но ещё и выполнять асинхронный вызов самой вложенной процедуры, также используя оповещение:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image3362.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Здесь во вложенную процедуру мы сразу передаём описание оповещения, в котором содержится тот код, который должен быть выполнен после вложенной процедуры (последняя процедура). Вызывая блокирующий метод, мы передаём ему «его» описание оповещения (ВложеннаяПроцедураЗавершение), а также, через дополнительные параметры, то описание оповещения, которое нужно будет выполнить после того, как будут обработаны интерактивные действия пользователя (ОбработкаКомандыЗавершение).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Если сразу осознать такую конструкцию сложно, можно писать «по старому», а затем использовать функции рефакторинга. Они доступны начиная с версии 8.3.5. Как это делается можно посмотреть в примере </span><a href="https://its.1c.ru/docs/v8nonmodal/#35"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Необходимо преобразование в асинхронную процедуру</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="24"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">В</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">опрос в обработчике формы ПередЗакрытием</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Особенность диалога с пользователем в этом (и многих других) обработчиках заключается в том, что в зависимости от реакции пользователя принимается решение: продолжать дальнейшие действия, или отказаться от них. Для этого используется параметр процедуры Отказ. При одном ответе пользователя мы отказываемся от продолжения (Отказ = Истина). При другом ответе пользователя - продолжаем дальнейшие действия.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В данном случае сложность заключается в том, что ответ пользователя мы узнаем уже после того, как выйдем из контекста этого обработчика. В процедуре, обрабатывающей оповещение. А параметр Отказ нужно установить именно в этом обработчике.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому мы действуем в два приёма:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">В первый раз безусловно отменяем дальнейшие действия (Отказ = Истина) и выводим вопрос пользователю;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">В обработчике оповещения, в зависимости от реакции пользователя, либо снова программно закрываем форму, либо ничего не делаем.</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Проблема заключается в том, что обработчик ПередЗакрытием будет выполнен два раза. И чтобы отличить первое его выполнение от второго (когда ответ пользователя уже известен) мы используем клиентскую переменную ВыполняетсяЗакрытие в качестве флага.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В первый проход её значение равно Ложь, и это значит, что нужно отказаться от закрытия и задать вопрос. Во второй проход её значение равно Истина, и это значит, что вопрос задавать не надо:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image232.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="25"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">В</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">опрос в обработчике формы ПередЗаписью</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В обработчике события формы ПередЗаписью также может возникнуть потребность задать вопрос. Как и в предыдущем примере. Однако здесь вопрос так просто не решается. Отличие заключается в следующем.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В предыдущем примере, оказываясь в обработчике ПередЗакрытием, мы однозначно знали действие, которое должно быть выполнено. Это закрытие формы. Поэтому в обработке оповещения мы смело писали Закрыть().</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Но в обработчике ПередЗаписью мы такой однозначной информации не имеем. В этом обработчике мы можем оказаться по двум причинам: если пользователь нажал Записать, или если он нажал Записать и закрыть. То есть дальнейший сценарий действий нам неизвестен. Определить его стандартными способами, находясь внутри этого обработчика, мы не можем.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому тут можно предложить три варианта, но все они, к сожалению, обладают недостатками:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">Изменить логику прикладного решения так, чтобы не было диалога с пользователем в этом обработчике. Это не всегда возможно;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">В обработке оповещения с помощью собственной блокирующей формы задавать пользователю развернутый вопрос, предполагающий точное описание дальнейших действий: Отказаться?, Только записать?, Записать и закрыть? Это может выглядеть не очень красиво, ведь пользователь уже нажал &quot;Записать и закрыть&quot;, а его опять об этом спрашивают;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">Не использовать стандартные команды формы Записать, &quot;Записать и закрыть&quot;. Вместо них создать собственные команды, в которых и выполнять необходимые алгоритмы. Создание собственных команд потребует дополнительных трудозатрат.</span></li></ul>
<p style=" margin-top:0px; margin-bottom:15px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="26"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">К</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#802b2b;">ак переделывать старые конфигурации</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="27"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">О</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">бщие замечания</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Переделка имеющихся конфигураций для работы в режиме без использования модальности сводится к трём этапам:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">Первый этап - это поиск модальных вызовов и оценка возможности их преобразования;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">Второй этап - автоматическое преобразование модальных вызовов;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">Третий этап - полуавтоматическое преобразование тех модальных вызовов, которые невозможно преобразовать автоматически. Либо изменение алгоритма с целью вообще отказаться от использования таких вызовов (если преобразование оказывается слишком сложным и трудоёмким).</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Далее мы рассмотрим все три этапа по-порядку. Какие инструменты можно использовать, какие рекомендации можно дать.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="28"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">П</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">оиск модальных методов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Существует несколько инструментов, которые позволяют найти модальные вызовы конфигурации. Некоторые из этих инструментов позволяют также оценить возможность автоматического преобразования этих вызовов.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="29"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">В</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;"> режиме 1С:Предприятие</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Для того чтобы прямо в пользовательском режиме увидеть модальные вызовы конфигурации можно использовать свойство конфигурации &quot;Режим использования модальности&quot;. Его нужно установить в значение &quot;Использовать с предупреждением&quot;. Тогда в процессе работы прикладного решения будут выводиться сообщения каждый раз, как выполняется модальный метод. Но работе приложения это препятствовать не будет:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image31331.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="30"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">П</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">роверка конфигурации в режиме Конфигуратор</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Можно найти все методы, открывающие модальные диалоговые окна. Для этого нужно выполнить проверку конфигурации с установленным флажком &quot;Поиск использования модальности&quot;.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Проверка конфигурации - Расширенная проверка - Поиск использования модальности:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image7610.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Результат проверки будет выдан в окно служебных сообщений, из которого можно сразу же перейти в модуль, в котором находится данный метод:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image6610.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Нужно отметить, что эта проверка обнаруживает не все возможные модальные вызовы, а только те, которые можно определить «наверняка». То есть это модальные методы глобального контекста и модальные методы тех объектов, тип которых однозначно определён в анализируемом контексте.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому, например, в приведённом примере проверка не обнаруживает модальное открытие диалога выбора цвета во вложенной процедуре. В контексте этой процедуры тип переменной &quot;Диалог&quot; неизвестен.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="31"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">П</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">роверка одного модуля</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Можно найти все модальные вызовы в каком-либо одном модуле (начиная с версии 8.3.5). Для этого нужно открыть этот модуль и выполнить команду контекстного меню &quot;Рефакторинг - Модальные вызовы - Найти модальные вызовы модуля&quot; (эти же команды доступны из меню &quot;Текст&quot;):</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image29413.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В этом случае будут найдены все строки кода, которые приводят или могут привести к открытию модальных окон. В том числе и те строки, где открытие модального окна возможно, если объект имеет определённый тип:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image16522.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Например, во вложенной процедуре в данном примере действительно будет открыто модальное окно для выбора цвета.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Если бы во вложенную процедуру в переменной &quot;Диалог&quot; передавалась бы выборка справочника, то, естественно, никакого модального вызова не было бы. Однако проверка всё равно отметила бы эту строку как «потенциально опасную».</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому окончательное решение в таких случаях нужно принимать на основе визуального анализа алгоритма и типов используемых объектов.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="32"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">П</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">оиск с анализом возможности автоматического преобразования</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Можно не только найти все модальные вызовы, но и оценить возможность их автоматического преобразования (начиная с версии 8.3.5). Оговоримся, что автоматическое преобразование выполняется не во всех случаях, подробнее об этом можно прочитать в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#33"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Автоматическое преобразование модальных методов</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Анализ модальных вызовов выполняется для всей конфигурации командой &quot;Конфигурация - Рефакторинг - Анализ модальных вызовов конфигурации&quot;:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image18993.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Перед выполнением анализа можно задать параметры. Они позволяют уточнить анализ и одновременно с анализом выполнить преобразование:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image7655.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Со стандартными значениями (если ничего не менять) буду найдены только те вызовы модальных методов, которые удалось определить однозначно:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image14198.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Если установить флажок &quot;Отображать методы объектов неопределенного типа&quot;, то тогда будут показаны и те методы объектов, которые потенциально могут привести к открытию модальных окон. Это могут быть действительно модальные вызовы, а может быть и нет. Всё зависит от типа объекта, который нужно определять визуально, анализируя код программы:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image14500.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В любом случае (с теми или иными параметрами анализа) результат будет содержать подробную информацию по каждому вызову с комментарием:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image26556.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Вызовы, имеющие отметку &quot;Может быть преобразован&quot;, поддаются автоматическому преобразованию, которое выполняется этой же командой (нужно установить соответствующий флажок). Подробнее можно прочитать в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#33"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Автоматическое преобразование модальных методов</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">С теми вызовами, про которые сказано, что они &quot;Требуют дополнительных изменений&quot;, нужно разбираться вручную. Тут сложно описать все возможные ситуации, но по некоторым типичным сообщениям можно дать примеры.</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">&quot;Принадлежность не определена&quot; - суть проблемы описана в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#31"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Проверка одного модуля</span></a><span style=" font-size:small;">. Вы должны самостоятельно определить тип объекта и на основании этого понять, приводит ли его метод к модальному вызову, или нет.</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#35"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Необходимо преобразование в асинхронную процедуру</span></a><span style=" font-size:small;">;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:small;">&quot;Не поддерживается для процедур и функций глобального контекста&quot; - суть проблемы описана в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#18"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Вопрос в модуле управляемого приложения</span></a><span style=" font-size:small;">. Нужно вручную определить модуль, в котором будет располагаться обработчик оповещения.</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#36"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Присвоение ссылочного параметра: СтандартнаяОбработка</span></a><span style=" font-size:small;">;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#37"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Присвоение ссылочного параметра: Отказ</span></a><span style=" font-size:small;">;</span></li>
<li style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://its.1c.ru/docs/v8nonmodal/#38"><span style=" font-size:small; text-decoration: underline; color:#c15016;">Невозможно выделить фрагмент-окончание: фрагмент содержит незавершенный блок условия..</span></a><a href="https://its.1c.ru/docs/v8nonmodal/#"><span style=" font-size:small; text-decoration: underline; color:#c15016;">.</span></a></li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="33"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">А</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">втоматическое преобразование модальных методов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Автоматическое преобразование можно выполнить для всей конфигурации командой &quot;Конфигурация - Рефакторинг - Анализ модальных вызовов конфигурации - Производить преобразование найденных вызовов&quot;.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Можно выполнить аналогичное преобразование только для одного модуля. Для этого можно использовать команду контекстного меню &quot;Рефакторинг - Модальные вызовы - Преобразовать модальные вызовы модуля&quot;, или аналогичную команду из меню &quot;Текст&quot;.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Эти инструменты доступны начиная с версии 8.3.5.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Автоматически преобразуются только тривиальные вызовы. Это такие вызовы, преобразование которых затрагивает одну процедуру и не требует операций помимо выделения объекта.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Остальные вызовы требуют вашего вмешательства. Часть из них можно также преобразовать автоматически, но с помощью последовательного выполнения других команд рефакторинга. Другая часть потребует предварительного изменения алгоритма программы. Некоторые такие типичные ситуации рассматриваются в примерах следующего раздела.</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="34"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Р</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">учное преобразование конструкций, которые невозможно преобразовать автоматически</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">В этом разделе мы разберём некоторые типичные случаи, когда автоматическое преобразование невозможно и требуется вмешательство разработчика.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Как мы уже неоднократно говорили, далеко не во всех сценариях работы нужно стремиться «во что бы то ни стало» преобразовать модальный код в блокирующий. Как поступить в каждом конкретном случае - это вопрос творческий. Дать готовые рекомендации вроде «если у вас то-то, то поступить надо так-то» довольно затруднительно.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Мы рекомендуем отталкиваться от того соображения, что асинхронная модель работы, по сути, требует другого подхода к проектированию юзабилити интерфейса. То есть, «по хорошему», «по большому счёту» вопрос не в том, чтобы заменить одни операторы встроенного языка другими. Вопрос в том, чтобы изменить сценарий работы прикладного решения таким образом, когда использование блокирующего диалога станет ненужным.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому если преобразование существующего модального кода кажется сложным, затратным или вовсе невозможным - не стоит ломать голову. Не стоит придумывать сложные способы преобразования его в блокирующий код. Лучше подумать о том, чтобы в этом месте совсем отказаться от использования модальности.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="35"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Н</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">еобходимо преобразование в асинхронную процедуру</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">При анализе модулей могут встретиться конструкции, автоматическое преобразование которых затруднительно. Например, на модальный вызов во вложенной процедуре система отреагирует следующим образом:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image11768.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Это не значит, что автоматическое преобразование невозможно. Это значит, что его результат может оказаться непростым. И по этой причине желательно, чтобы разработчик выполнил его отдельно и самостоятельно.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Чтобы в подобном случае выполнить преобразование, можно установить курсор на модальный метод и из контекстного меню выполнить команду &quot;Рефакторинг - Модальные вызовы - Преобразовать модальный вызов&quot;:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image24169.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Перед выполнением платформа известит вас, что кроме самого модального вызова необходимо преобразовать вызов процедуры к асинхронному виду:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image2712.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">И после этого будут выполнены оба преобразования:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image14518.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="36"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">П</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">рисвоение cсылочного параметра: СтандартнаяОбработка</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Это простой, но типичный пример. Такое сообщение, например, будет выдано при анализе следующего модуля:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image5318.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Здесь проблема заключается в том, что присвоение значения переменной СтандартнаяОбработка происходит уже после выполнения модального метода, а значит должно выполняться в процедуре обработчика оповещения. Но там это выполнить невозможно.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">На самом деле видно, что в этом фрагменте строку СтандартнаяОбработка = Ложь; можно разместить и до вызова модального метода. От этого логика работы не меняется:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image4618.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">И если мы поступим таким образом, то сразу же облегчим задачу преобразования. Теперь оно может быть выполнено автоматически:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image22483.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="37"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">П</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">рисвоение cсылочного параметра: Отказ</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Этот пример по своему «диагностическому сообщению» очень похож на предыдущий, но решение его уже не такое простое. Например, исходный код выглядит так:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image14314.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Суть проблемы здесь та же, что и в предыдущем примере. После выполнения модального метода нужно присвоить значение переменной &quot;Отказ&quot;. Но сделать это в контексте обработчика оповещения невозможно.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Дополнительная сложность заключается в том, что просто переставить местами строки кода, как в предыдущем примере, тоже нельзя. Отказ выполняется только при одном из условий.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поэтому тут нужно применять решение, которое описано в разделе </span><a href="https://its.1c.ru/docs/v8nonmodal/#24"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">Вопрос в обработчике формы ПередЗакрытием</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">. Выполнять закрытие формы «в два прохода». Первый раз безусловно отказываться от действия и только задавать вопрос. А второй раз уже закрывать форму. А чтобы не зациклиться, использовать переменную модуля для того, чтобы отличить первый проход от второго.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="38"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Н</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">евозможно выделить фрагмент-окончание: фрагмент содержит незавершенный блок условия... Пример 1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Подобные сообщения свидетельствуют о том, что код довольно сложен и алгоритм автоматического преобразования не может его обработать. В таких случаях можно попытаться изменить или упростить алгоритм для того, чтобы автоматическое преобразование стало возможным. Условия, при которых возможно автоматическое преобразование, подробно описаны </span><a href="http://its.1c.ru/db/v83doc#bookmark:dev:TI000001312"><span style=" font-family:'Verdana'; font-size:8.25pt; text-decoration: underline; color:#c15016;">в документации</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Безусловно, ситуации могут быть самыми разными и в общем случае они требуют творческого подхода. Здесь мы покажем пару типичных приёмов. Это избавление от цикла и выделение фрагментов в отдельную процедуру.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Итак, к сообщению, вынесенному в заголовок, может привести, например, следующий фрагмент:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1218.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Проблема этого фрагмента в том, что модальный вызов выполняется внутри цикла. Для того чтобы появилась возможность преобразовать этот фрагмент в немодальный, нужно изменить логику алгоритма. Вместо того чтобы задавать вопрос каждый раз, как попадается «подозрительная» строка таблицы, нужно сначала найти все подозрительные строки, а затем один раз задать вопрос по поводу этих строк:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image4760.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">После такого изменения становится доступным автоматическое преобразование:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image6378.png" /></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="39"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">Н</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">евозможно выделить фрагмент-окончание: фрагмент содержит незавершенный блок условия... Пример 2</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Другой фрагмент, который может привести к такому сообщению, может выглядеть так:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image4005.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Проблема этого фрагмента заключается в строках, отмеченных стрелками. Каждая из этих строк может быть выполнена как в результате прохода по ветке с модальным вызовом, так и в результате прохода по «безмодальным» веткам алгоритма. Если бы в коде присутствовала только одна из этих строк, автоматическое преобразование было бы возможно. Но так, как их две, ситуация становится довольно сложной.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Что можно сделать? Путём выделения фрагмента кода в отдельную процедуру можно попытаться уменьшить «вариативность» алгоритма.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Посмотрим на первую «проблемную» строку. Перейти к ней мы можем из двух веток алгоритма:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image719.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Причём эти переходы должны будут принципиально отличаться, ведь из «немодальной» ветки мы можем перейти в эту же процедуру, а из «модальной» мы должны будем перейти в обработчик оповещения.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Можно упростить эту ситуацию, выделив весь оператор &quot;Если&quot; в отдельную процедуру:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1526.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Тогда уже будет неважно, по какой ветке шло выполнение алгоритма. К выполнению «проблемной» строки мы придём из одной и той же точки - после возврата из выделенной процедуры.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">Поскольку выделяемый фрагмент содержит &quot;Возврат&quot;, выделим его в асинхронную процедуру. Получится четыре процедуры:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image32385.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1807.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;">А теперь уже можно преобразовать вызов ОткрытьФормуМодально(). Вместо одной процедуры АктВыполненныхРаботПоЗаказамПриИзмененииФрагмент() получится три процедуры:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image28232.png" /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Verdana'; font-size:8.25pt; color:#514b4f; background-color:#ffffd5;"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" width="100%" cellspacing="0" cellpadding="0">
<tr>
<td background="images/page/topbcg.gif">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="__tabs_footer__"></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">©</span><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;"> ООО «1С». Все права защищены<br /></span><a href="https://its.1c.ru/terms_of_use/"><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; text-decoration: underline; color:#c15016;">Информация об ограничениях</span></a></p></td>
<td background="images/page/topbcg.gif">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana'; font-size:8.25pt; color:#514b4f;"> </span></p></td>
<td background="images/page/topbcg.gif">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image28579.png" /><a href="mailto:web-its@1c.ru"><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; text-decoration: underline; color:#c15016;">  web-its@1c.ru</span></a><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; color:#514b4f;">   <br /></span><a href="https://its.1c.ru/docs/v8nonmodal/#"><span style=" font-family:'Verdana'; font-size:8.25pt; font-weight:600; text-decoration: underline; color:#c15016;">Другие сайты фирмы «1С»▼ </span></a></p></td></tr></table></body></html>