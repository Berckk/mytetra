<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'Consolas'; font-size:12pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-weight:696; color:#333333;">В публикации рассмотрены все возможные (ну или почти все) варианты программного открытия форм в управляемом приложении. Появление публикации связано с тем, что справка 1С и желтые книжки очень немногословны на эту тему. Часто простые задачи (например, создание элемента справочника на основании) вызывают трудности даже у очень опытных разработчиков 1С v 8.1, которые мало работали с управляемым приложением.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" color:#333333;">23:07:17Для начала небольшое лирическое отступление. Расскажу о том, </span><span style=" font-weight:696; color:#333333;"> как НЕ НАДО открывать формы. </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:696; color:#333333;">Нельзя использовать метод ПолучитьФорму()</span><span style=" color:#333333;">. Это нельзя делать по двум причинам. Первая причина — это то, что этот метод отрабатывает на порядок медленнее, чем методы ОткрытьФорму() или ОткрытьФормуМодально(). Вторая причина кроется в том, почему собственно такой метод используется. Это обычно делается, когда нужно как-то программно обработать форму перед открытием. Например, нужно установить отбор динамического списка в форме выбора. Давайте рассмотрим, как обычно используется метод «ПолучитьФорму()» и чем ошибка использования такого метода. Программный код открытия формы выбора с отбором выглядит примерно так:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image2553.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Ошибка здесь заключается в том, что код программной обработки формы вполне может вступить в конфликт с кодом события «ПриСозданииНаСервере» формы. Это может произойти не сразу. Например, в модуль формы внесли изменения гораздо позже. Причем тот разработчик, который вносил изменения в модуль формы окажется прав. Откуда ему знать, что его форма откуда-то вызывается таким образом? </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Если вы хотите, чтобы ваше приложение работало в Web-Интерфейсе, то </span><span style=" font-weight:696; color:#333333;">лучше воздержаться от открытия форм в Модальном режиме</span><span style=" color:#333333;">. В таком режиме они реализованы как всплывающие окна, которые по умолчанию отключены в большинстве браузеров. Вместо Модального режима можно использовать свойство управляемой формы РежимОткрытияОкна = &quot;Блокировать окно владельца&quot;.  </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Про запреты все, расскажу, как правильно открывать формы</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">1. </span><span style=" font-weight:696; color:#333333;">Как открыть форму объекта имея ссылку на него</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Если нужно открыть основную форму объекта, то все очень просто</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'courier new,courier'; font-size:8.25pt; color:#0000ff;"><br /></span><span style=" color:#a52a2a;">&amp;НаКлиенте<br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">	ОткрытьЗначение</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">СсылкаНаОбъект</span><span style=" color:#ff0000;">);</span><span style=" color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;">КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,Arial,Helvetica,sans-serif'; font-size:8.25pt; color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:696; color:#333333;">2. Как открыть форму выбора произвольного объекта</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Простой вариант открытия: никакой дополнительной программной обработки формы не требуется. Нужно просто открыть основную форму выбора и получить выбранное значение. Используем метод «ВвестиЗначение». Синтаксис следующий: </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#a52a2a;">&amp;НаКлиенте<br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">Команда1</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span><span style=" color:#a52a2a;"><br /></span><span style=" color:#ff0000;"><br />    Перем </span><span style=" color:#0000ff;">ВыбЗнач</span><span style=" color:#ff0000;">;<br /><br />    </span><span style=" color:#0000ff;">Массив </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Массив</span><span style=" color:#ff0000;">;<br />    </span><span style=" color:#0000ff;">Массив</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Добавить</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Тип</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;СправочникСсылка.Контрагенты&quot;</span><span style=" color:#ff0000;">));<br /><br />    </span><span style=" color:#0000ff;">ОписаниеТиповК </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">ОписаниеТипов</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Массив</span><span style=" color:#ff0000;">);<br /><br />    Если </span><span style=" color:#0000ff;">ВвестиЗначение</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">ВыбЗнач</span><span style=" color:#ff0000;">, </span><span style=" color:#000000;">&quot;Введите значение&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">ОписаниеТиповК</span><span style=" color:#ff0000;">) Тогда<br /><br />        </span><span style=" color:#0000ff;">Сообщить</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">ВыбЗнач</span><span style=" color:#ff0000;">);<br /><br />    КонецЕсли;<br /><br />КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Если задать несколько возможных типов, то программа перед выбором значения предложит пользователю выбрать тип. </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:696; color:#333333;">Использование метода ОткрытьФорму()</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Сначала нужно разобраться с параметрами метода «ОткрытьФорму». Полный список параметров выглядит так:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">ИмяФормы, Параметры, Владелец, Уникальность, Окно</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">С параметром «ИмяФормы» все более или менее понятно. А вот про то, что за загадочная штука «Параметры» (тип – Структура), в справке 1С написано очень мало. Передать туда можно все, что можно передать с клиента на сервер. Однако этой информации явно недостаточно.  Попробую разобрать все возможные варианты. </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:696; color:#333333;">3. Как открыть форму существующего объекта ссылочного типа</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">У формы любого объекта или записи регистра есть так называемый ключевой реквизит. В списке реквизитов формы он выделен полужирным. Чтобы открыть форму объекта, нужно в параметрдобавить элемент с Ключом «Ключ» и значением — ссылкой на нужный объект. Например:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"><br /></span><span style=" color:#a52a2a;">&amp;НаКлиенте<br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФормуПроекта</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span><span style=" color:#a52a2a;"><br /></span><span style=" color:#ff0000;"><br />    </span><span style=" color:#0000ff;">П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;<br />    </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Ключ&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Проект</span><span style=" color:#ff0000;">);<br /><br />   </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Справочник.Проекты.ФормаОбъекта&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">);<br /><br />КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:696; color:#333333;">4. Открыть форму существующей записи регистра</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Очень похоже на открытие формы объекта ссылочного типа, однако в элементе «Ключ» вместо ссылки мы передаем Ключ записи регистра. Например:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"><br /></span><span style=" color:#a52a2a;">&amp;НаКлиенте<br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФормуРегистра</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)<br /><br />   </span><span style=" color:#0000ff;">КлючЗаписи </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;<br />   </span><span style=" color:#0000ff;">КлючЗаписи</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Период&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">ТекущаяДата</span><span style=" color:#ff0000;">());<br />   </span><span style=" color:#0000ff;">КлючЗаписи</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;ФизЛицо&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Сотрудник</span><span style=" color:#ff0000;">);<br /><br />   </span><span style=" color:#0000ff;">МассивКлюча </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Массив</span><span style=" color:#ff0000;">;<br />   </span><span style=" color:#0000ff;">МассивКлюча</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Добавить</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">КлючЗаписи</span><span style=" color:#ff0000;">);<br /><br />   </span><span style=" color:#0000ff;">КлючЗаписиРегистра </span><span style=" color:#ff0000;">= Новый(</span><span style=" color:#000000;">&quot;РегистрСведенийКлючЗаписи.ФИОФизЛиц&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">МассивКлюча</span><span style=" color:#ff0000;">);<br /><br />   </span><span style=" color:#0000ff;">П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Ключ&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">КлючЗаписиРегистра</span><span style=" color:#ff0000;">);<br /><br />   </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;РегистрСведений.ФИОФизЛиц.ФормаЗаписи&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">);<br /><br />КонецПроцедуры<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"> </span><span style=" font-weight:696; color:#333333;">5. Как открыть форму нового объекта с обработкой заполнения</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Это даже проще, чем открыть форму существующего. Мы просто не указываем в параметрах «Ключ».</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"><br /></span><span style=" color:#a52a2a;">&amp;НаКлиенте</span><span style=" color:#0000ff;"><br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">	П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;<br />	</span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Справочник.Проекты.ФормаОбъекта&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;">КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">В это случае вызывается процедура «</span><span style=" font-weight:696; color:#333333;">ОбработкаЗаполнения</span><span style=" color:#333333;">» модуля объекта. Эта процедура имеет единственный параметр «</span><span style=" font-weight:696; color:#333333;">Основание</span><span style=" color:#333333;">».  Если мы в параметры вставим ключ «Основание», то он будет передан в процедуру «ОбработкаЗаполнения». Например, </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#a52a2a;">&amp;НаКлиенте</span><span style=" color:#0000ff;"><br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Основание&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Проект</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Справочник.Проекты.ФормаОбъекта&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">);<br /><br />КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:696; color:#333333;">6. Как правильно организовать выбор (подбор) в табличную часть  </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Стоит знать, что все параметры, указанные в параметреметода открыть форму, доступны в событии «ПриСозданииНаСервере» открываемой формы. Например:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#a52a2a;">&amp;НаКлиенте</span><span style=" color:#0000ff;"><br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Основание&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Проект</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Справочник.Проекты.ФормаВыбора&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">);<br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> <br /></span><span style=" color:#ff0000;">КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Тогда в событии «ПриСозданииНаСервере» формы элемента справочника Проекты можно будет получить «НашПараметр». Однако форма справочника проекты может открываться, откуда угодно и этого параметра может и не быть. Поэтому лучше проверить, что параметр действительно передан при помощи такой конструкции: </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"><br /></span><span style=" color:#a52a2a;">&amp;НаСервере<br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ПриСозданииНаСервере</span><span style=" color:#ff0000;">()<br /><br />Если </span><span style=" color:#0000ff;">Параметры</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Свойство</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;НашПараметр&quot;</span><span style=" color:#ff0000;">) Тогда<br /><br /></span><span style=" color:#0000ff;">ПереданныйПараметр </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">Параметры</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">НашПараметр</span><span style=" color:#ff0000;">;<br /><br />      </span><span style=" color:#008000;">//Программная обработка формы<br /><br /></span><span style=" color:#ff0000;">КонецЕсли;<br /><br />КонецПроцедуры<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Чтобы организовать выбор, нужно знать еще пару моментов. Первое, это параметр метода «ОткрытьФорму». В качестве владельца может выступать другая форма или элемент управления. Этот параметр, во-первых будет доступен в свойстве «ВладелецФормы» открываемой формы, а во-вторых, после совершения пользователем выбора стандартным способом (т.е. через форму выбора, по нажатии кнопки «Выбрать»), у Владельца сработает событие «</span><span style=" font-weight:696; color:#333333;">ОбработкаВыбора</span><span style=" color:#333333;">». </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"><br /></span><span style=" color:#a52a2a;">&amp;НаКлиенте</span><span style=" color:#333333;"><br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#333333;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#333333;">Команда</span><span style=" color:#ff0000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;НашПараметр&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Проект</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">ВладелецФормыПодбора </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">Элементы</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">ПодчиненныеПроекты</span><span style=" color:#ff0000;">;<br /></span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Справочник.Проекты.ФормаВыбора&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">ВладелецФормыПодбора</span><span style=" color:#ff0000;">);<br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;"><br />КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">В том случае, если выбор происходит не стандартным способом, т.е. открывается не форма выбора, а какая-то произвольная форма, то стоит использовать метод ОповеститьОВыборе(), при этом установив через параметры свойство открываемой формы ЗакрыватьПриВыборе = Истина. Например, </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"><br /></span><span style=" color:#a52a2a;">&amp;НаКлиенте</span><span style=" color:#0000ff;"><br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;<br /><br /></span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;НашПараметр&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Склад</span><span style=" color:#ff0000;">);<br /></span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;ЗакрыватьПриВыборе&quot;</span><span style=" color:#ff0000;">, Истина);<br /></span><span style=" color:#0000ff;">ВладелецФормыПодбора </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">Элементы</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Товары</span><span style=" color:#ff0000;">;<br /><br /></span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Обработка.ПодборНоменклатуры.Форма&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">ВладелецФормыПодбора</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;">КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">В самой форме организуем программно выбор  таким образом: </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#a52a2a;">&amp;НаКлиенте<br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">Выбрать</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)<br /><br />    </span><span style=" color:#0000ff;">РезультатВыбора </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">ПодготовитьРезультатВыбора</span><span style=" color:#ff0000;">();<br />    </span><span style=" color:#0000ff;">ОповеститьОВыборе</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">РезультатВыбора</span><span style=" color:#ff0000;">);<br /><br />КонецПроцедуры<br /><br /><br /></span><span style=" color:#a52a2a;">&amp;НаСервере<br /></span><span style=" color:#ff0000;">Функция </span><span style=" color:#0000ff;">ПодготовитьРезультатВыбора</span><span style=" color:#ff0000;">()<br /><br /></span><span style=" color:#008000;">//Готовим результат выбора<br /><br /></span><span style=" color:#ff0000;">КонецФункции<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">В результате выполнения метода ОповеститьОВыборе форма подбора закроется и вызовется событие «ОбработкаВыбора» элемента управления «Товары».</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Прочие полезности. В случае подбора в форму можно передать параметры, чьи названия говорят сами за себя: «ЗакрыватьПриВыборе», МножественныйВыбор, ЗакрыватьПриЗакрытииВладельца. Все параметры имеют тип Булево. Их названия говорят сами за себя. </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:696; color:#333333;">7. Как открыть форму и установить в ней отбор</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Простая ситуация: простой отбор по одному или нескольким реквизитам. Например, что-то вроде такого</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Контрагент = ВыбранныйКонтрагент И Организация = ВыбраннаяОрганизация</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Для организации такого отбора нужно использовать параметр «Отбор», тип Структура, где Ключ – это Имя поля динамического списока, а значение это собственно то, почему нужно фильтровать данные. Например:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"><br /></span><span style=" color:#a52a2a;">&amp;НаКлиенте</span><span style=" color:#0000ff;"><br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;<br /></span><span style=" color:#0000ff;">Отбор </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;<br /></span><span style=" color:#0000ff;">Отбор</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Владелец&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Контрагент</span><span style=" color:#ff0000;">);<br /></span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Отбор&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Отбор</span><span style=" color:#ff0000;">);<br /><br /></span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Справочник.ДоговорыКонтрагентов.ФормаВыбора&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;"> <br />КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">В том случае если отбор сложный и его можно установить только программно, то можно пойти двумя путями:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Первый путь: не самый удачный. Открываем форму, передаем в нее параметр</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;"><br /></span><span style=" color:#a52a2a;">&amp;НаКлиенте</span><span style=" color:#0000ff;"><br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Команда</span><span style=" color:#ff0000;">)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Структура</span><span style=" color:#ff0000;">;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Вставить</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Подразделение&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Подразделение</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#0000ff;">ВладелецФормыПодбора </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">Элементы</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Сотрудник</span><span style=" color:#ff0000;">;<br /></span><span style=" color:#0000ff;">ОткрытьФорму</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Справочник.СотрудникиОрганизаций.ФормаВыбора&quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">П</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">ВладелецФормыПодбора</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;"> <br />КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">В самой форме в событии «ПриСозданииНаСервере» задаем отбор списка: </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#a52a2a;">&amp;НаСервере<br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ПриСозданииНаСервере</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Отказ</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">СтандартнаяОбработка</span><span style=" color:#ff0000;">)<br /><br />    Если </span><span style=" color:#0000ff;">Параметры</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Свойство</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Подразделение&quot;</span><span style=" color:#ff0000;">) Тогда<br /><br />        </span><span style=" color:#0000ff;">СписокСотрудников </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">ПодготовитьСписокСотрудниковПодразделения</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Параметры</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Подразделение</span><span style=" color:#ff0000;">);<br /><br />        </span><span style=" color:#0000ff;">НовыйЭлемент </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">Список</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Отбор</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Элементы</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Добавить</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Тип</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;ЭлементОтбораКомпоновкиДанных&quot;</span><span style=" color:#ff0000;">));<br />        </span><span style=" color:#0000ff;">НовыйЭлемент</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">ЛевоеЗначение </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">ПолеКомпоновкиДанных</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Ссылка&quot;</span><span style=" color:#ff0000;">);<br />        </span><span style=" color:#0000ff;">НовыйЭлемент</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">ВидСравнения  </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">ВидСравненияКомпоновкиДанных</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">ВСписке</span><span style=" color:#ff0000;">;<br />        </span><span style=" color:#0000ff;">НовыйЭлемент</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">ПравоеЗначение   </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">СписокСотрудников</span><span style=" color:#ff0000;">;<br />        </span><span style=" color:#0000ff;">НовыйЭлемент</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Применение </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">ТипПримененияОтбораКомпоновкиДанных</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Элементы</span><span style=" color:#ff0000;">;<br /><br />    КонецЕсли;<br /><br />КонецПроцедуры</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Второй путь - это использование Параметов Выбора и поэтому он лучше. Пример:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#a52a2a;">&amp;НаКлиенте<br /></span><span style=" color:#ff0000;">Процедура </span><span style=" color:#0000ff;">ПриОткрытии</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">Отказ</span><span style=" color:#ff0000;">)<br /><br />    </span><span style=" color:#0000ff;">Подразделение </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">Объект</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Подразделение</span><span style=" color:#ff0000;">;<br />    </span><span style=" color:#0000ff;">НовыйПараметр </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">ПараметрВыбора</span><span style=" color:#ff0000;">(</span><span style=" color:#000000;">&quot;Подразделение &quot;</span><span style=" color:#ff0000;">, </span><span style=" color:#0000ff;">Подразделение</span><span style=" color:#ff0000;">);<br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;">    </span><span style=" color:#0000ff;">НовыйМассив </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">Массив</span><span style=" color:#ff0000;">;<br />    </span><span style=" color:#0000ff;">НовыйМассив</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Добавить</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">НовыйПараметр</span><span style=" color:#ff0000;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#ff0000;">    </span><span style=" color:#0000ff;">НовыеПараметры </span><span style=" color:#ff0000;">= Новый </span><span style=" color:#0000ff;">ФиксированныйМассив</span><span style=" color:#ff0000;">(</span><span style=" color:#0000ff;">НовыйМассив</span><span style=" color:#ff0000;">);<br />    </span><span style=" color:#0000ff;">Элементы</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">Сотрудник</span><span style=" color:#ff0000;">.</span><span style=" color:#0000ff;">ПараметрыВыбора </span><span style=" color:#ff0000;">= </span><span style=" color:#0000ff;">НовыеПараметры</span><span style=" color:#ff0000;">;<br /><br />КонецПроцедуры<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Почему параметры выбора использовать лучше:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">1)      Мы не отказываемся от стандартной обработки выбора: меньше кода</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">2)      Параметры выбора будут доступны в процедуре «ОбработкаПолученияДанныхВыбора» модуля менеджера выбираемого объекта. Поэтому мы сможем ограничить список доступных значений выбора при вводе по строке. </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:696; color:#333333;">Уникальность формы</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Т.к. форму нельзя открывать модально, то вполне вероятно, что пользователь может несколько раз нажимать одну и ту же кнопку, открывающую форму. Чтобы форма не открывалась каждый раз, а активизировалась уже открытая форма, нужно заполнить параметр. Тип значения этого параметра произвольный, т.е. в него можно передать все, что угодно. Удобно в него передавать  УникальныйИдентификатор формы, из которой производится открытие. Например,</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;"> </span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">ВладелецФормы = Элементы.Сотрудники;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">ОткрытьФорму(&quot;Справочник.СотрудникиОрганизаций.Форма&quot;, , ВладелецФормы, ЭтаФорма.УникальныйИдентификатор);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#333333;">Платформа будет искать открытые окна с таким ключом уникальности. В том случае, если она их найдет, то будет активировано существующее окно. В противном – открыто новое.</span></p></body></html>