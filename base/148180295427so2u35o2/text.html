<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:17.5pt; font-weight:600; color:#2277aa;">Плагины для сниппетов</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Хотя термин &quot;сниппет&quot; уже прижился в жаргоне программистов, лучше лишний раз его уточнить, чтобы не было проблем с пониманием. Согласно Википедии, &quot;сниппет&quot; (англ. snippet — фрагмент, отрывок) в практике программирования — небольшой фрагмент исходного кода или текста, пригодный для повторного использования. Часто под сниппетами понимают не просто какой-то код, который можно использовать простым Copy-Paste, а целые макросы. Обычно они используются вместе с какими-то сокращениями, например, чтобы в Python не писать каждый раз код вроде</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f1f0ed;"><span style=" font-family:'Courier New'; font-size:12pt; font-weight:600; color:#0000ff;">def</span><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;"> myfunc (</span><span style=" font-family:'Courier New'; font-size:12pt; color:#0000ff;">self</span><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">, param):<br />    </span><span style=" font-family:'Courier New'; font-size:12pt; color:#0000ff;">super</span><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;"> (MyClass, </span><span style=" font-family:'Courier New'; font-size:12pt; color:#0000ff;">self</span><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">).</span><span style=" font-family:'Courier New'; font-size:12pt; color:#813d27;">myfunc</span><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">(param)</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p align="right" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><a href="http://jenyay.net/Programming/VimPlugins2?action=sourceblock&amp;num=27"><span style=" font-family:'Arial,sans-serif'; font-size:10pt; text-decoration: underline; color:#244b80;">Исходник</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">можно создать сниппет, который будет создавать такой шаблон по ключевому слову. Например, вводим вы слово &quot;def&quot;, нажимаем Tab или другую установленную горячую клавишу, и вместо &quot;def&quot; вы получаем шаблон функции, причем сниппеты, как правило, позволяют вводить шаблонные значения вроде &quot;myfunc&quot; в данном случае, и вводя &quot;myfunc&quot; один раз, оно будет подставлено и в место второго упоминания (в данном примере после оператора </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">super</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">).</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Выбор плагинов для создания сниппетов под Vim достаточно широк, в качестве примера рассмотрим </span><a href="https://github.com/garbas/vim-snipmate"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; text-decoration: underline; color:#244b80;">snipmate</span></a><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Для его работы требуются два дополнительных плагина - </span><a href="https://github.com/marcweber/vim-addon-mw-utils"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; text-decoration: underline; color:#244b80;">vim-addon-mw-utils</span></a><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> и </span><a href="https://github.com/tomtom/tlib_vim"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; text-decoration: underline; color:#244b80;">tlib_vim</span></a><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Будем считать, что этот плагин устанавливается с помощью Vundle. В этом случае нужно добавить следующие строки между </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">call vundle#begin()</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> и </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">call vundle#end()</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; color:#000000; background-color:#f1f0ed;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:12pt;">Plugin </span><span style=" font-family:'Courier New'; font-size:12pt; color:#c5a22d;">&quot;MarcWeber/vim-addon-mw-utils&quot;</span> </li>
<li style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; color:#000000; background-color:#f1f0ed;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:12pt;">Plugin </span><span style=" font-family:'Courier New'; font-size:12pt; color:#c5a22d;">&quot;tomtom/tlib_vim&quot;</span> </li>
<li style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt; color:#000000; background-color:#f1f0ed;" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-size:12pt;">Plugin </span><span style=" font-family:'Courier New'; font-size:12pt; color:#c5a22d;">&quot;garbas/vim-snipmate&quot;</span> </li></ol>
<p align="right" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><a href="http://jenyay.net/Programming/VimPlugins2?action=sourceblock&amp;num=28"><span style=" font-family:'Arial,sans-serif'; font-size:10pt; text-decoration: underline; color:#244b80;">Исходник</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">На </span><a href="https://github.com/garbas/vim-snipmate"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; text-decoration: underline; color:#244b80;">странице плагина</span></a><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> рекомендуют дополнительно установить плагин </span><a href="https://github.com/honza/vim-snippets"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; text-decoration: underline; color:#244b80;">vim-snippets</span></a><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> который добавляет множество сниппетов для многих языков программирования.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Сниппеты представляют собой текстовые файлы, расположенные в папке </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">snippets</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> внутри папки </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">.vim</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> и всех остальных папок, упомянутых в параметре </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">runtimepath</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">, о котором говорилось в разделе про </span><a href="http://jenyay.net/Programming/VimPlugins2#vundle"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; text-decoration: underline; color:#244b80;">Vundle</span></a><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Имена файлов сниппетов могут иметь разный формат (подробнее про синтаксис сниппетов можно прочитать, вызвав справку с помощью команды </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">:help snippet-syntax</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">), но обязательно в имени файла или пути до него (сниппеты можно располагать во вложенных папках) должен упоминаться язык (syntax в терминах Vim), для которого предназначен сниппет. Каждый файл со сниппетом имеет расширение </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">.snippets</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">. В простейшем случае файл со сниппетами может иметь вид: </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">python.snippets</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">, </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">html.snippets</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> и т.д. При необходимости после имени языка после подчеркивания можно добавлять произвольное имя (например, </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">python_myfile.snippets</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">), что позволяет иметь несколько файлов сниппетов в одной папке.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Также сниппеты для одного языка программирования можно объединять в папки. В этом случае имя папки - это название языка (syntax), а имя файла сниппета может быть произвольным.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">На самом деле snipmate обладает еще некоторыми опциями, связанными с именами файлов, но мы их упоминать не будем, их можно найти в справке по вышеуказанной ссылке.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">В одном файле </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">.snippets</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> может располагаться несколько сниппетов. Их формат выглядит следующим образом:</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f1f0ed;"><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">snippet триггер<br />        Код сниппета<br />        ...</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p align="right" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><a href="http://jenyay.net/Programming/VimPlugins2?action=sourceblock&amp;num=29"><span style=" font-family:'Arial,sans-serif'; font-size:10pt; text-decoration: underline; color:#244b80;">Исходник</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Под триггером понимается то сокращение, которое нужно ввести в Vim, после чего нажать клавишу Tab (это по умолчанию, при желании клавиша настраивается), в результате триггер будет заменен на текст сниппета.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">В язык описания сниппетов мы углубляться не будем, приведу пару сниппетов в качестве примера.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f1f0ed;"><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">snippet #!<br />        #!/usr/bin/env python<br />        # -*- coding: utf-8 -*-</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p align="right" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><a href="http://jenyay.net/Programming/VimPlugins2?action=sourceblock&amp;num=30"><span style=" font-family:'Arial,sans-serif'; font-size:10pt; text-decoration: underline; color:#244b80;">Исходник</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Этот сниппет просто добавляет заголовок скриптов Python при вводе #!&lt;Tab&gt;.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Сниппеты могут быть более умными. Вот, например, сниппет для ввода конструкции </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">with</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> Python. В этом случае мы можем перемещаться от одного поля ввода (${1:expr}, ${2:var}) к следующему с помощью клавиши Tab.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f1f0ed;"><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">snippet with<br />        with ${1:expr} as ${2:var}:<br />                ${0}</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p align="right" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><a href="http://jenyay.net/Programming/VimPlugins2?action=sourceblock&amp;num=31"><span style=" font-family:'Arial,sans-serif'; font-size:10pt; text-decoration: underline; color:#244b80;">Исходник</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Следующая анимированная gif-ка показывает работу этого плагина.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p align="center" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><img src="image12956.png" /><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Если клавиша Tab у вас уже задействована другим плагином, то вы можете установить новую горячую клавишу для плагина snipmate, добавив в файл </span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; font-style:italic; color:#000000;">.vimrc</span><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;"> следующие строки (в них показана привязка к горячей клавише Ctrl+J):</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f1f0ed;"><span style=" font-family:'Courier New'; font-size:12pt; color:#000000;">:imap &lt;C-J&gt; &lt;Plug&gt;snipMateNextOrTrigger<br />:smap &lt;C-J&gt; &lt;Plug&gt;snipMateNextOrTrigger</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p align="right" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><a href="http://jenyay.net/Programming/VimPlugins2?action=sourceblock&amp;num=32"><span style=" font-family:'Arial,sans-serif'; font-size:10pt; text-decoration: underline; color:#244b80;">Исходник</span></a><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f9f9f9;"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">Хорошей альтернативой snipmate, возможно даже более более мощной, является плагин </span><a href="https://github.com/sirver/ultisnips"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; text-decoration: underline; color:#244b80;">ultisnips</span></a><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">, который использует сниппеты у том же формате, поэтому для него также подходит набор сниппетов из </span><a href="https://github.com/honza/vim-snippets"><span style=" font-family:'Arial,sans-serif'; font-size:12pt; text-decoration: underline; color:#244b80;">vim-snippets</span></a><span style=" font-family:'Arial,sans-serif'; font-size:12pt; color:#000000;">. У меня он даже лучше работает с клавишей Tab, если на ней висит еще и автодополнение.</span><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;">  </span></p></body></html>